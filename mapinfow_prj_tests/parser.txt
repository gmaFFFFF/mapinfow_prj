= Тестирование модуля mapinfow_prj.parser
>>> from mapinfow_prj.parser import MapinfowPrj

== Тестирование возможности разбора отдельных систем координат

>>> for рез in MapinfowPrj('"СК 1 вне группы", 8, 1001, 7, 37.98333333333, 0, 1, 1300000, -4511057.628')._в_список_лексем_без_групп_ск():
...     print(рез.as_dict())
{'СК 1 вне группы': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 8}, 'датум': {'датум_номер': 1001}, 'ед_изм': 7, 'проекция': [37.98333333333, 0.0, 1.0, 1300000.0, -4511057.628]}}
>>> for рез in MapinfowPrj('"СК 1a вне группы", 2, 1001, 7, 37.98333333333, 0')._в_список_лексем_без_групп_ск():
...     print(рез.as_dict())
{'СК 1a вне группы': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 2}, 'датум': {'датум_номер': 1001}, 'ед_изм': 7, 'проекция': [37.98333333333, 0.0]}}
>>> for рез in MapinfowPrj('"Равновеликая коническая Альберса (Аляска)", 9, 63, 7, -154, 50, 55, 65, 0, 0')._в_список_лексем_без_групп_ск():
...     print(рез.as_dict())
{'Равновеликая коническая Альберса (Аляска)': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 9}, 'датум': {'датум_номер': 63}, 'ед_изм': 7, 'проекция': [-154.0, 50.0, 55.0, 65.0, 0.0, 0.0]}}
>>> for рез in MapinfowPrj('"СК 2 вне группы", 8, 1001, 7, 40.98333333333, 0, 1, 2300000, -4511057.628')._в_список_лексем_без_групп_ск():
...     print(рез.as_dict())
{'СК 2 вне группы': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 8}, 'датум': {'датум_номер': 1001}, 'ед_изм': 7, 'проекция': [40.98333333333, 0.0, 1.0, 2300000.0, -4511057.628]}}
>>> for рез in MapinfowPrj('"--- Датум--"\\n"Стандартный датум", 8, 1001, 7, 58.03333333333, 0, 1, 2300000, -5409414.70')._в_список_лексем_без_групп_ск():
...     print(рез.as_dict())
{'Стандартный датум': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 8}, 'датум': {'датум_номер': 1001}, 'ед_изм': 7, 'проекция': [58.03333333333, 0.0, 1.0, 2300000.0, -5409414.7]}}
>>> for рез in MapinfowPrj('"Пользовательский датум 7 параметров", 8, 9999, 3, 23.57, -140.95, -79.8, 0, -0.35, -0.79, -0.22, 0, 7, 37.98333333333, 0, 1, 1300000, -4511057.628')._в_список_лексем_без_групп_ск():
...     print(рез.as_dict())
{'Пользовательский датум 7 параметров': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 8}, 'датум': {'датум_эллипс_номер': 3, 'датум_сдвиг': [23.57, -140.95, -79.8], 'датум_поворот': [0.0, -0.35, -0.79], 'датум_масштаб_ppm': -0.22, 'датум_осн_мерид': 0.0}, 'ед_изм': 7, 'проекция': [37.98333333333, 0.0, 1.0, 1300000.0, -4511057.628]}}
>>> for рез in MapinfowPrj('"Пользовательский датум 999 7 параметров", 8, 999, 3, 23.57, -140.95, -79.8, 0, -0.35, -0.79, -0.22, 0, 7, 37.98333333333, 0, 1, 1300000, -4511057.628')._в_список_лексем_без_групп_ск():
...     print(рез.as_dict())
{'Пользовательский датум 999 7 параметров': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 8}, 'датум': {'датум_эллипс_номер': 3, 'датум_сдвиг': [23.57, -140.95, -79.8], 'датум_поворот': [0.0, -0.35, -0.79], 'датум_масштаб_ppm': -0.22, 'датум_осн_мерид': 0.0}, 'ед_изм': 7, 'проекция': [37.98333333333, 0.0, 1.0, 1300000.0, -4511057.628]}}
>>> for рез in MapinfowPrj('"Пользовательский датум 3 параметра", 1, 9999, 4, -93.5, -103.5, -123.3')._в_список_лексем_без_групп_ск():
...     print(рез.as_dict())
{'Пользовательский датум 3 параметра': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 1}, 'датум': {'датум_эллипс_номер': 4, 'датум_сдвиг': [-93.5, -103.5, -123.3]}}}
>>> for рез in MapinfowPrj('"Пользовательский датум 999 3 параметра", 1, 999, 6, -7, 36, 225')._в_список_лексем_без_групп_ск():
...     print(рез.as_dict())
{'Пользовательский датум 999 3 параметра': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 1}, 'датум': {'датум_эллипс_номер': 6, 'датум_сдвиг': [-7.0, 36.0, 225.0]}}}
>>> for рез in MapinfowPrj('"Датум с кодом СК\\p26941", 3, 74, 7, -122, 39.3333333333, 40, 41.6666666667, 2000000, 500000')._в_список_лексем_без_групп_ск():
...     print(рез.as_dict())
{'Датум с кодом СК': {'ск_код': 26941, 'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 3}, 'датум': {'датум_номер': 74}, 'ед_изм': 7, 'проекция': [-122.0, 39.3333333333, 40.0, 41.6666666667, 2000000.0, 500000.0]}}
>>> for рез in MapinfowPrj('"Географическая СК"\n"Долгота / Широта\\p7842", 1, 1028')._в_список_лексем_без_групп_ск():
...     print(рез.as_dict())
{'Долгота / Широта': {'ск_код': 7842, 'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 1}, 'датум': {'датум_номер': 1028}}}
>>> for рез in MapinfowPrj('"Аффиное преобразование + границы"\\n"Проекция + аффин",                         1008, 1001,                                                  7, 9, 0, 1, 2500000, -60000000,       0.98, 0.17, -300, -0.17, 0.98, +300')._в_список_лексем_без_групп_ск():
...     print(рез.as_dict())
{'Проекция + аффин': {'проекция_тип': {'проекция_модификатор': 1000, 'проекция_номер': 8}, 'датум': {'датум_номер': 1001}, 'ед_изм': 7, 'проекция': [9.0, 0.0, 1.0, 2500000.0, -60000000.0], 'аффин': [0.98, 0.17, -300.0, -0.17, 0.98, 300.0]}}
>>> for рез in MapinfowPrj('"Проекция + Датум + аффин",                 1008, 9999, 3, 24, -1414, -81, 0, -0.3, -0.8, -0.1, 0,       7, 9, 0, 1, 2500000, -60000000,       0.98, 0.17, -300, -0.17, 0.98, +300')._в_список_лексем_без_групп_ск():
...     print(рез.as_dict())
{'Проекция + Датум + аффин': {'проекция_тип': {'проекция_модификатор': 1000, 'проекция_номер': 8}, 'датум': {'датум_эллипс_номер': 3, 'датум_сдвиг': [24.0, -1414.0, -81.0], 'датум_поворот': [0.0, -0.3, -0.8], 'датум_масштаб_ppm': -0.1, 'датум_осн_мерид': 0.0}, 'ед_изм': 7, 'проекция': [9.0, 0.0, 1.0, 2500000.0, -60000000.0], 'аффин': [0.98, 0.17, -300.0, -0.17, 0.98, 300.0]}}
>>> for рез in MapinfowPrj('"Проекция + границы",                       2008, 1001,                                                  7, 9, 0, 1, 2500000, -60000000,       0, 6000000, 2000000, 8000000')._в_список_лексем_без_групп_ск():
...     print(рез.as_dict())
{'Проекция + границы': {'проекция_тип': {'проекция_модификатор': 2000, 'проекция_номер': 8}, 'датум': {'датум_номер': 1001}, 'ед_изм': 7, 'проекция': [9.0, 0.0, 1.0, 2500000.0, -60000000.0], 'границы': [0.0, 6000000.0, 2000000.0, 8000000.0]}}
>>> for рез in MapinfowPrj('"Проекция + Датум + границы",               2008, 9999, 3, 24, -1414, -81, 0, -0.3, -0.8, -0.1, 0,                                                                                   0, 6000000, 2000000, 8000000')._в_список_лексем_без_групп_ск():
...     print(рез.as_dict())
{'Проекция + Датум + границы': {'проекция_тип': {'проекция_модификатор': 2000, 'проекция_номер': 8}, 'датум': {'датум_эллипс_номер': 3, 'датум_сдвиг': [24.0, -1414.0, -81.0], 'датум_поворот': [0.0, -0.3, -0.8], 'датум_масштаб_ppm': -0.1, 'датум_осн_мерид': 0.0}, 'границы': [0.0, 6000000.0, 2000000.0, 8000000.0]}}
>>> for рез in MapinfowPrj('"Проекция + аффин + границы",               3008, 1001,                                                  7, 9, 0, 1, 2500000, -60000000,       0.98, 0.17, -300, -0.17, 0.98, +300,  0, 6000000, 2000000, 8000000')._в_список_лексем_без_групп_ск():
...     print(рез.as_dict())
{'Проекция + аффин + границы': {'проекция_тип': {'проекция_модификатор': 3000, 'проекция_номер': 8}, 'датум': {'датум_номер': 1001}, 'ед_изм': 7, 'проекция': [9.0, 0.0, 1.0, 2500000.0, -60000000.0], 'аффин': [0.98, 0.17, -300.0, -0.17, 0.98, 300.0], 'границы': [0.0, 6000000.0, 2000000.0, 8000000.0]}}
>>> for рез in MapinfowPrj('"Проекция + Датум + аффин + границы",       3008, 9999, 3, 24, -1414, -81, 0, -0.3, -0.8, -0.1, 0,                                             0.98, 0.17, -300, -0.17, 0.98, +300,  0, 6000000, 2000000, 8000000')._в_список_лексем_без_групп_ск():
...     print(рез.as_dict())
{'Проекция + Датум + аффин + границы': {'проекция_тип': {'проекция_модификатор': 3000, 'проекция_номер': 8}, 'датум': {'датум_эллипс_номер': 3, 'датум_сдвиг': [24.0, -1414.0, -81.0], 'датум_поворот': [0.0, -0.3, -0.8], 'датум_масштаб_ppm': -0.1, 'датум_осн_мерид': 0.0}, 'аффин': [0.98, 0.17, -300.0, -0.17, 0.98, 300.0], 'границы': [0.0, 6000000.0, 2000000.0, 8000000.0]}}
>>> for рез in MapinfowPrj('"аффин",                                    1001, 1028,                                                                                        0.98, 0.17, -300, -0.17, 0.98, 300')._в_список_лексем_без_групп_ск():
...     print(рез.as_dict())
{'аффин': {'проекция_тип': {'проекция_модификатор': 1000, 'проекция_номер': 1}, 'датум': {'датум_номер': 1028}, 'аффин': [0.98, 0.17, -300.0, -0.17, 0.98, 300.0]}}
>>> for рез in MapinfowPrj('"границы",                                  2001, 1028,                                                                                                                              0, 10, 20, 30')._в_список_лексем_без_групп_ск():
...     print(рез.as_dict())
{'границы': {'проекция_тип': {'проекция_модификатор': 2000, 'проекция_номер': 1}, 'датум': {'датум_номер': 1028}, 'границы': [0.0, 10.0, 20.0, 30.0]}}
>>> for рез in MapinfowPrj('"аффин + границы",                          3001, 1028,                                                                                        0.98, 0.17, -300, -0.17, 0.98, +300,  0, 10, 20, 30')._в_список_лексем_без_групп_ск():
...     print(рез.as_dict())
{'аффин + границы': {'проекция_тип': {'проекция_модификатор': 3000, 'проекция_номер': 1}, 'датум': {'датум_номер': 1028}, 'аффин': [0.98, 0.17, -300.0, -0.17, 0.98, 300.0], 'границы': [0.0, 10.0, 20.0, 30.0]}}


== Тестирование возможности разбора множества систем координат без учета их группировки

>>> prjs =  '''
... "СК 1 вне группы", 8, 1001, 7, 37.98333333333, 0, 1, 1300000, -4511057.628
... "СК 1 вне группы", 8, 1001, 7, 37.98333333333, 0, 1, 1300000, -4511057.628
... "СК 2 вне группы", 8, 1001, 7, 40.98333333333, 0, 1, 2300000, -4511057.628
... "--- Датум--"
... "Стандартный датум", 8, 1001, 7, 58.03333333333, 0, 1, 2300000, -5409414.70
... "Пользовательский датум 7 параметров", 8, 9999, 3, 23.57, -140.95, -79.8, 0, -0.35, -0.79, -0.22, 0, 7, 37.98333333333, 0, 1, 1300000, -4511057.628
... "Пользовательский датум 999 7 параметров", 8, 999, 3, 23.57, -140.95, -79.8, 0, -0.35, -0.79, -0.22, 0, 7, 37.98333333333, 0, 1, 1300000, -4511057.628
... "Пользовательский датум 3 параметра", 1, 9999, 4, -93.5, -103.5, -123.3
... "Пользовательский датум 999 3 параметра", 1, 999, 6, -7, 36, 225
... "Датум с кодом СК\\p26941", 3, 74, 7, -122, 39.3333333333, 40, 41.6666666667, 2000000, 500000
...
... "Географическая СК"
... "Долгота / Широта\\p7842", 1, 1028
...
... "Аффиное преобразование + границы"
... "Проекция + аффин",                         1008, 1001,                                                  7, 9, 0, 1, 2500000, -60000000,       0.98, 0.17, -300, -0.17, 0.98, +300
... "Проекция + Датум + аффин",                 1008, 9999, 3, 24, -1414, -81, 0, -0.3, -0.8, -0.1, 0,       7, 9, 0, 1, 2500000, -60000000,       0.98, 0.17, -300, -0.17, 0.98, +300
... "Проекция + границы",                       2008, 1001,                                                  7, 9, 0, 1, 2500000, -60000000,       0, 6000000, 2000000, 8000000
... "Проекция + Датум + границы",               2008, 9999, 3, 24, -1414, -81, 0, -0.3, -0.8, -0.1, 0,                                                                                   0, 6000000, 2000000, 8000000
... "Проекция + аффин + границы",               3008, 1001,                                                  7, 9, 0, 1, 2500000, -60000000,       0.98, 0.17, -300, -0.17, 0.98, +300,  0, 6000000, 2000000, 8000000
... "Проекция + Датум + аффин + границы",       3008, 9999, 3, 24, -1414, -81, 0, -0.3, -0.8, -0.1, 0,                                             0.98, 0.17, -300, -0.17, 0.98, +300,  0, 6000000, 2000000, 8000000
... "аффин",                                    1001, 1028,                                                                                        0.98, 0.17, -300, -0.17, 0.98, 300
... "границы",                                  2001, 1028,                                                                                                                              0, 10, 20, 30
... "аффин + границы",                          3001, 1028,                                                                                        0.98, 0.17, -300, -0.17, 0.98, +300,  0, 10, 20, 30
...
... '''
>>> for рез in MapinfowPrj(prjs)._в_список_лексем_без_групп_ск():
...     print(рез.as_dict())
{'СК 1 вне группы': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 8}, 'датум': {'датум_номер': 1001}, 'ед_изм': 7, 'проекция': [37.98333333333, 0.0, 1.0, 1300000.0, -4511057.628]}}
{'СК 1 вне группы': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 8}, 'датум': {'датум_номер': 1001}, 'ед_изм': 7, 'проекция': [37.98333333333, 0.0, 1.0, 1300000.0, -4511057.628]}}
{'СК 2 вне группы': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 8}, 'датум': {'датум_номер': 1001}, 'ед_изм': 7, 'проекция': [40.98333333333, 0.0, 1.0, 2300000.0, -4511057.628]}}
{'Стандартный датум': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 8}, 'датум': {'датум_номер': 1001}, 'ед_изм': 7, 'проекция': [58.03333333333, 0.0, 1.0, 2300000.0, -5409414.7]}}
{'Пользовательский датум 7 параметров': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 8}, 'датум': {'датум_эллипс_номер': 3, 'датум_сдвиг': [23.57, -140.95, -79.8], 'датум_поворот': [0.0, -0.35, -0.79], 'датум_масштаб_ppm': -0.22, 'датум_осн_мерид': 0.0}, 'ед_изм': 7, 'проекция': [37.98333333333, 0.0, 1.0, 1300000.0, -4511057.628]}}
{'Пользовательский датум 999 7 параметров': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 8}, 'датум': {'датум_эллипс_номер': 3, 'датум_сдвиг': [23.57, -140.95, -79.8], 'датум_поворот': [0.0, -0.35, -0.79], 'датум_масштаб_ppm': -0.22, 'датум_осн_мерид': 0.0}, 'ед_изм': 7, 'проекция': [37.98333333333, 0.0, 1.0, 1300000.0, -4511057.628]}}
{'Пользовательский датум 3 параметра': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 1}, 'датум': {'датум_эллипс_номер': 4, 'датум_сдвиг': [-93.5, -103.5, -123.3]}}}
{'Пользовательский датум 999 3 параметра': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 1}, 'датум': {'датум_эллипс_номер': 6, 'датум_сдвиг': [-7.0, 36.0, 225.0]}}}
{'Датум с кодом СК': {'ск_код': 26941, 'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 3}, 'датум': {'датум_номер': 74}, 'ед_изм': 7, 'проекция': [-122.0, 39.3333333333, 40.0, 41.6666666667, 2000000.0, 500000.0]}}
{'Долгота / Широта': {'ск_код': 7842, 'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 1}, 'датум': {'датум_номер': 1028}}}
{'Проекция + аффин': {'проекция_тип': {'проекция_модификатор': 1000, 'проекция_номер': 8}, 'датум': {'датум_номер': 1001}, 'ед_изм': 7, 'проекция': [9.0, 0.0, 1.0, 2500000.0, -60000000.0], 'аффин': [0.98, 0.17, -300.0, -0.17, 0.98, 300.0]}}
{'Проекция + Датум + аффин': {'проекция_тип': {'проекция_модификатор': 1000, 'проекция_номер': 8}, 'датум': {'датум_эллипс_номер': 3, 'датум_сдвиг': [24.0, -1414.0, -81.0], 'датум_поворот': [0.0, -0.3, -0.8], 'датум_масштаб_ppm': -0.1, 'датум_осн_мерид': 0.0}, 'ед_изм': 7, 'проекция': [9.0, 0.0, 1.0, 2500000.0, -60000000.0], 'аффин': [0.98, 0.17, -300.0, -0.17, 0.98, 300.0]}}
{'Проекция + границы': {'проекция_тип': {'проекция_модификатор': 2000, 'проекция_номер': 8}, 'датум': {'датум_номер': 1001}, 'ед_изм': 7, 'проекция': [9.0, 0.0, 1.0, 2500000.0, -60000000.0], 'границы': [0.0, 6000000.0, 2000000.0, 8000000.0]}}
{'Проекция + Датум + границы': {'проекция_тип': {'проекция_модификатор': 2000, 'проекция_номер': 8}, 'датум': {'датум_эллипс_номер': 3, 'датум_сдвиг': [24.0, -1414.0, -81.0], 'датум_поворот': [0.0, -0.3, -0.8], 'датум_масштаб_ppm': -0.1, 'датум_осн_мерид': 0.0}, 'границы': [0.0, 6000000.0, 2000000.0, 8000000.0]}}
{'Проекция + аффин + границы': {'проекция_тип': {'проекция_модификатор': 3000, 'проекция_номер': 8}, 'датум': {'датум_номер': 1001}, 'ед_изм': 7, 'проекция': [9.0, 0.0, 1.0, 2500000.0, -60000000.0], 'аффин': [0.98, 0.17, -300.0, -0.17, 0.98, 300.0], 'границы': [0.0, 6000000.0, 2000000.0, 8000000.0]}}
{'Проекция + Датум + аффин + границы': {'проекция_тип': {'проекция_модификатор': 3000, 'проекция_номер': 8}, 'датум': {'датум_эллипс_номер': 3, 'датум_сдвиг': [24.0, -1414.0, -81.0], 'датум_поворот': [0.0, -0.3, -0.8], 'датум_масштаб_ppm': -0.1, 'датум_осн_мерид': 0.0}, 'аффин': [0.98, 0.17, -300.0, -0.17, 0.98, 300.0], 'границы': [0.0, 6000000.0, 2000000.0, 8000000.0]}}
{'аффин': {'проекция_тип': {'проекция_модификатор': 1000, 'проекция_номер': 1}, 'датум': {'датум_номер': 1028}, 'аффин': [0.98, 0.17, -300.0, -0.17, 0.98, 300.0]}}
{'границы': {'проекция_тип': {'проекция_модификатор': 2000, 'проекция_номер': 1}, 'датум': {'датум_номер': 1028}, 'границы': [0.0, 10.0, 20.0, 30.0]}}
{'аффин + границы': {'проекция_тип': {'проекция_модификатор': 3000, 'проекция_номер': 1}, 'датум': {'датум_номер': 1028}, 'аффин': [0.98, 0.17, -300.0, -0.17, 0.98, 300.0], 'границы': [0.0, 10.0, 20.0, 30.0]}}

== Тестирование возможности разбора множества систем координат с учётом их группировки

>>> prjs =  '''
... "СК 1 вне группы", 8, 1001, 7, 37.98333333333, 0, 1, 1300000, -4511057.628
... "СК 1 вне группы", 8, 1001, 7, 37.98333333333, 0, 1, 1300000, -4511057.628
... "СК 2 вне группы", 8, 1001, 7, 40.98333333333, 0, 1, 2300000, -4511057.628
... "--- Датум--"
... "Стандартный датум", 8, 1001, 7, 58.03333333333, 0, 1, 2300000, -5409414.70
... "Пользовательский датум 7 параметров", 8, 9999, 3, 23.57, -140.95, -79.8, 0, -0.35, -0.79, -0.22, 0, 7, 37.98333333333, 0, 1, 1300000, -4511057.628
... "Пользовательский датум 999 7 параметров", 8, 999, 3, 23.57, -140.95, -79.8, 0, -0.35, -0.79, -0.22, 0, 7, 37.98333333333, 0, 1, 1300000, -4511057.628
... "Пользовательский датум 3 параметра", 1, 9999, 4, -93.5, -103.5, -123.3
... "Пользовательский датум 999 3 параметра", 1, 999, 6, -7, 36, 225
... "Датум с кодом СК\\p26941", 3, 74, 7, -122, 39.3333333333, 40, 41.6666666667, 2000000, 500000
...
... "Географическая СК"
... "Долгота / Широта\\p7842", 1, 1028
...
... "Аффиное преобразование + границы"
... "Проекция + аффин",                         1008, 1001,                                                  7, 9, 0, 1, 2500000, -60000000,       0.98, 0.17, -300, -0.17, 0.98, +300
... "Проекция + Датум + аффин",                 1008, 9999, 3, 24, -1414, -81, 0, -0.3, -0.8, -0.1, 0,       7, 9, 0, 1, 2500000, -60000000,       0.98, 0.17, -300, -0.17, 0.98, +300
... "Проекция + границы",                       2008, 1001,                                                  7, 9, 0, 1, 2500000, -60000000,       0, 6000000, 2000000, 8000000
... "Проекция + Датум + границы",               2008, 9999, 3, 24, -1414, -81, 0, -0.3, -0.8, -0.1, 0,                                                                                   0, 6000000, 2000000, 8000000
... "Проекция + аффин + границы",               3008, 1001,                                                  7, 9, 0, 1, 2500000, -60000000,       0.98, 0.17, -300, -0.17, 0.98, +300,  0, 6000000, 2000000, 8000000
... "Проекция + Датум + аффин + границы",       3008, 9999, 3, 24, -1414, -81, 0, -0.3, -0.8, -0.1, 0,                                             0.98, 0.17, -300, -0.17, 0.98, +300,  0, 6000000, 2000000, 8000000
... "аффин",                                    1001, 1028,                                                                                        0.98, 0.17, -300, -0.17, 0.98, 300
... "границы",                                  2001, 1028,                                                                                                                              0, 10, 20, 30
... "аффин + границы",                          3001, 1028,                                                                                        0.98, 0.17, -300, -0.17, 0.98, +300,  0, 10, 20, 30
...
... '''
>>> for рез in MapinfowPrj(prjs)._в_список_лексем():
...     print(рез.as_dict())
{None: {'СК 1 вне группы': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 8}, 'датум': {'датум_номер': 1001}, 'ед_изм': 7, 'проекция': [37.98333333333, 0.0, 1.0, 1300000.0, -4511057.628]}, 'СК 2 вне группы': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 8}, 'датум': {'датум_номер': 1001}, 'ед_изм': 7, 'проекция': [40.98333333333, 0.0, 1.0, 2300000.0, -4511057.628]}}}
{'--- Датум--': {'Стандартный датум': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 8}, 'датум': {'датум_номер': 1001}, 'ед_изм': 7, 'проекция': [58.03333333333, 0.0, 1.0, 2300000.0, -5409414.7]}, 'Пользовательский датум 7 параметров': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 8}, 'датум': {'датум_эллипс_номер': 3, 'датум_сдвиг': [23.57, -140.95, -79.8], 'датум_поворот': [0.0, -0.35, -0.79], 'датум_масштаб_ppm': -0.22, 'датум_осн_мерид': 0.0}, 'ед_изм': 7, 'проекция': [37.98333333333, 0.0, 1.0, 1300000.0, -4511057.628]}, 'Пользовательский датум 999 7 параметров': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 8}, 'датум': {'датум_эллипс_номер': 3, 'датум_сдвиг': [23.57, -140.95, -79.8], 'датум_поворот': [0.0, -0.35, -0.79], 'датум_масштаб_ppm': -0.22, 'датум_осн_мерид': 0.0}, 'ед_изм': 7, 'проекция': [37.98333333333, 0.0, 1.0, 1300000.0, -4511057.628]}, 'Пользовательский датум 3 параметра': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 1}, 'датум': {'датум_эллипс_номер': 4, 'датум_сдвиг': [-93.5, -103.5, -123.3]}}, 'Пользовательский датум 999 3 параметра': {'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 1}, 'датум': {'датум_эллипс_номер': 6, 'датум_сдвиг': [-7.0, 36.0, 225.0]}}, 'Датум с кодом СК': {'ск_код': 26941, 'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 3}, 'датум': {'датум_номер': 74}, 'ед_изм': 7, 'проекция': [-122.0, 39.3333333333, 40.0, 41.6666666667, 2000000.0, 500000.0]}}}
{'Географическая СК': {'Долгота / Широта': {'ск_код': 7842, 'проекция_тип': {'проекция_модификатор': 0, 'проекция_номер': 1}, 'датум': {'датум_номер': 1028}}}}
{'Аффиное преобразование + границы': {'Проекция + аффин': {'проекция_тип': {'проекция_модификатор': 1000, 'проекция_номер': 8}, 'датум': {'датум_номер': 1001}, 'ед_изм': 7, 'проекция': [9.0, 0.0, 1.0, 2500000.0, -60000000.0], 'аффин': [0.98, 0.17, -300.0, -0.17, 0.98, 300.0]}, 'Проекция + Датум + аффин': {'проекция_тип': {'проекция_модификатор': 1000, 'проекция_номер': 8}, 'датум': {'датум_эллипс_номер': 3, 'датум_сдвиг': [24.0, -1414.0, -81.0], 'датум_поворот': [0.0, -0.3, -0.8], 'датум_масштаб_ppm': -0.1, 'датум_осн_мерид': 0.0}, 'ед_изм': 7, 'проекция': [9.0, 0.0, 1.0, 2500000.0, -60000000.0], 'аффин': [0.98, 0.17, -300.0, -0.17, 0.98, 300.0]}, 'Проекция + границы': {'проекция_тип': {'проекция_модификатор': 2000, 'проекция_номер': 8}, 'датум': {'датум_номер': 1001}, 'ед_изм': 7, 'проекция': [9.0, 0.0, 1.0, 2500000.0, -60000000.0], 'границы': [0.0, 6000000.0, 2000000.0, 8000000.0]}, 'Проекция + Датум + границы': {'проекция_тип': {'проекция_модификатор': 2000, 'проекция_номер': 8}, 'датум': {'датум_эллипс_номер': 3, 'датум_сдвиг': [24.0, -1414.0, -81.0], 'датум_поворот': [0.0, -0.3, -0.8], 'датум_масштаб_ppm': -0.1, 'датум_осн_мерид': 0.0}, 'границы': [0.0, 6000000.0, 2000000.0, 8000000.0]}, 'Проекция + аффин + границы': {'проекция_тип': {'проекция_модификатор': 3000, 'проекция_номер': 8}, 'датум': {'датум_номер': 1001}, 'ед_изм': 7, 'проекция': [9.0, 0.0, 1.0, 2500000.0, -60000000.0], 'аффин': [0.98, 0.17, -300.0, -0.17, 0.98, 300.0], 'границы': [0.0, 6000000.0, 2000000.0, 8000000.0]}, 'Проекция + Датум + аффин + границы': {'проекция_тип': {'проекция_модификатор': 3000, 'проекция_номер': 8}, 'датум': {'датум_эллипс_номер': 3, 'датум_сдвиг': [24.0, -1414.0, -81.0], 'датум_поворот': [0.0, -0.3, -0.8], 'датум_масштаб_ppm': -0.1, 'датум_осн_мерид': 0.0}, 'аффин': [0.98, 0.17, -300.0, -0.17, 0.98, 300.0], 'границы': [0.0, 6000000.0, 2000000.0, 8000000.0]}, 'аффин': {'проекция_тип': {'проекция_модификатор': 1000, 'проекция_номер': 1}, 'датум': {'датум_номер': 1028}, 'аффин': [0.98, 0.17, -300.0, -0.17, 0.98, 300.0]}, 'границы': {'проекция_тип': {'проекция_модификатор': 2000, 'проекция_номер': 1}, 'датум': {'датум_номер': 1028}, 'границы': [0.0, 10.0, 20.0, 30.0]}, 'аффин + границы': {'проекция_тип': {'проекция_модификатор': 3000, 'проекция_номер': 1}, 'датум': {'датум_номер': 1028}, 'аффин': [0.98, 0.17, -300.0, -0.17, 0.98, 300.0], 'границы': [0.0, 10.0, 20.0, 30.0]}}}

== Тестирование преобразования mapinfow.prj в объектное представление системы координат

>>> prjs =  '''
... "ГеогСК", 1, 104
... "Проекция", 8, 1001, 7, 58.03333333333, 0, 1, 2300000, -5409414.70
... "Датум7", 1, 9999, 3, 23.57, -140.95, -79.8, 0, -0.35, -0.79, -0.22, 0
... "Датум7+пр", 8, 999, 3, 23.57, -140.95, -79.8, 0, -0.35, -0.79, -0.22, 1, 7, 37.98, 0, 1, 1300000, -4511057.628
... "Датум3", 1, 999, 3, 23.57, -140.95, -79.8
... "Аффиное преобразование + границы"
... "аффин",1001, 104, 0.98, 0.17, -300, -0.17, 0.98, 300
... "границы",2001, 104, 0, 10, 20, 30
... "аффин + границы", 3001, 104,0.98, 0.17, -300, -0.17, 0.98, +300,  0, 10, 20, 30
... '''
>>> парсер = MapinfowPrj(prjs)
>>> парсер.найти_ск("ГеогСК")
СистемаКоординат(группа_ск=None, название_ск='ГеогСК', код=None, датум=Датум(proj_стр='+ellps=WGS84 +datum=WGS84'), проекция=Проекция(proj_стр='+proj=lonlat'), афин=None, границы=None)
>>> парсер.найти_ск("Проекция")
СистемаКоординат(группа_ск=None, название_ск='Проекция', код=None, датум=Датум(proj_стр='+ellps=krass +towgs84=24,-123,-94,0.02,-0.25,-0.13,1.1'), проекция=Проекция(proj_стр='+proj=tmerc +lon_0=58.03333333333 +lat_0=0.0 +k_0=1.0 +x_0=2300000.0 +y_0=-5409414.7 +units=m'), афин=None, границы=None)
>>> парсер.найти_ск("Датум7")
СистемаКоординат(группа_ск=None, название_ск='Датум7', код=None, датум=Датум(proj_стр='+towgs84=23.57,-140.95,-79.8,-0.0,0.35,0.79,-0.22 +ellps=krass'), проекция=Проекция(proj_стр='+proj=lonlat'), афин=None, границы=None)
>>> парсер.найти_ск("Датум7+пр")
СистемаКоординат(группа_ск=None, название_ск='Датум7+пр', код=None, датум=Датум(proj_стр='+towgs84=23.57,-140.95,-79.8,-0.0,0.35,0.79,-0.22 +pm=1.0 +ellps=krass'), проекция=Проекция(proj_стр='+proj=tmerc +lon_0=37.98 +lat_0=0.0 +k_0=1.0 +x_0=1300000.0 +y_0=-4511057.628 +units=m'), афин=None, границы=None)
>>> парсер.найти_ск("Датум3")
СистемаКоординат(группа_ск=None, название_ск='Датум3', код=None, датум=Датум(proj_стр='+towgs84=23.57,-140.95,-79.8 +ellps=krass'), проекция=Проекция(proj_стр='+proj=lonlat'), афин=None, границы=None)
>>> парсер.найти_ск("аффин", "Аффиное преобразование + границы")
СистемаКоординат(группа_ск='Аффиное преобразование + границы', название_ск='аффин', код=None, датум=Датум(proj_стр='+ellps=WGS84 +datum=WGS84'), проекция=Проекция(proj_стр='+proj=lonlat'), афин=АффинноеПреобразование(s11=0.98, s12=0.17, xoff=-300.0, s21=-0.17, s22=0.98, yoff=300.0), границы=None)
>>> парсер.найти_ск("границы", "Аффиное преобразование + границы")
СистемаКоординат(группа_ск='Аффиное преобразование + границы', название_ск='границы', код=None, датум=Датум(proj_стр='+ellps=WGS84 +datum=WGS84'), проекция=Проекция(proj_стр='+proj=lonlat'), афин=None, границы=ГраницыСистемыКоординат(x_min=0.0, y_min=10.0, x_max=20.0, y_max=30.0))
>>> парсер.найти_ск("аффин + границы", "Аффиное преобразование + границы")
СистемаКоординат(группа_ск='Аффиное преобразование + границы', название_ск='аффин + границы', код=None, датум=Датум(proj_стр='+ellps=WGS84 +datum=WGS84'), проекция=Проекция(proj_стр='+proj=lonlat'), афин=АффинноеПреобразование(s11=0.98, s12=0.17, xoff=-300.0, s21=-0.17, s22=0.98, yoff=300.0), границы=ГраницыСистемыКоординат(x_min=0.0, y_min=10.0, x_max=20.0, y_max=30.0))

>>> list(парсер["Аффиное преобразование + границы"])
[СистемаКоординат(группа_ск='Аффиное преобразование + границы', название_ск='аффин', код=None, датум=Датум(proj_стр='+ellps=WGS84 +datum=WGS84'), проекция=Проекция(proj_стр='+proj=lonlat'), афин=АффинноеПреобразование(s11=0.98, s12=0.17, xoff=-300.0, s21=-0.17, s22=0.98, yoff=300.0), границы=None), СистемаКоординат(группа_ск='Аффиное преобразование + границы', название_ск='границы', код=None, датум=Датум(proj_стр='+ellps=WGS84 +datum=WGS84'), проекция=Проекция(proj_стр='+proj=lonlat'), афин=None, границы=ГраницыСистемыКоординат(x_min=0.0, y_min=10.0, x_max=20.0, y_max=30.0)), СистемаКоординат(группа_ск='Аффиное преобразование + границы', название_ск='аффин + границы', код=None, датум=Датум(proj_стр='+ellps=WGS84 +datum=WGS84'), проекция=Проекция(proj_стр='+proj=lonlat'), афин=АффинноеПреобразование(s11=0.98, s12=0.17, xoff=-300.0, s21=-0.17, s22=0.98, yoff=300.0), границы=ГраницыСистемыКоординат(x_min=0.0, y_min=10.0, x_max=20.0, y_max=30.0))]
>>> list(парсер)
[СистемаКоординат(группа_ск=None, название_ск='ГеогСК', код=None, датум=Датум(proj_стр='+ellps=WGS84 +datum=WGS84'), проекция=Проекция(proj_стр='+proj=lonlat'), афин=None, границы=None), СистемаКоординат(группа_ск=None, название_ск='Проекция', код=None, датум=Датум(proj_стр='+ellps=krass +towgs84=24,-123,-94,0.02,-0.25,-0.13,1.1'), проекция=Проекция(proj_стр='+proj=tmerc +lon_0=58.03333333333 +lat_0=0.0 +k_0=1.0 +x_0=2300000.0 +y_0=-5409414.7 +units=m'), афин=None, границы=None), СистемаКоординат(группа_ск=None, название_ск='Датум7', код=None, датум=Датум(proj_стр='+towgs84=23.57,-140.95,-79.8,-0.0,0.35,0.79,-0.22 +ellps=krass'), проекция=Проекция(proj_стр='+proj=lonlat'), афин=None, границы=None), СистемаКоординат(группа_ск=None, название_ск='Датум7+пр', код=None, датум=Датум(proj_стр='+towgs84=23.57,-140.95,-79.8,-0.0,0.35,0.79,-0.22 +pm=1.0 +ellps=krass'), проекция=Проекция(proj_стр='+proj=tmerc +lon_0=37.98 +lat_0=0.0 +k_0=1.0 +x_0=1300000.0 +y_0=-4511057.628 +units=m'), афин=None, границы=None), СистемаКоординат(группа_ск=None, название_ск='Датум3', код=None, датум=Датум(proj_стр='+towgs84=23.57,-140.95,-79.8 +ellps=krass'), проекция=Проекция(proj_стр='+proj=lonlat'), афин=None, границы=None), СистемаКоординат(группа_ск='Аффиное преобразование + границы', название_ск='аффин', код=None, датум=Датум(proj_стр='+ellps=WGS84 +datum=WGS84'), проекция=Проекция(proj_стр='+proj=lonlat'), афин=АффинноеПреобразование(s11=0.98, s12=0.17, xoff=-300.0, s21=-0.17, s22=0.98, yoff=300.0), границы=None), СистемаКоординат(группа_ск='Аффиное преобразование + границы', название_ск='границы', код=None, датум=Датум(proj_стр='+ellps=WGS84 +datum=WGS84'), проекция=Проекция(proj_стр='+proj=lonlat'), афин=None, границы=ГраницыСистемыКоординат(x_min=0.0, y_min=10.0, x_max=20.0, y_max=30.0)), СистемаКоординат(группа_ск='Аффиное преобразование + границы', название_ск='аффин + границы', код=None, датум=Датум(proj_стр='+ellps=WGS84 +datum=WGS84'), проекция=Проекция(proj_стр='+proj=lonlat'), афин=АффинноеПреобразование(s11=0.98, s12=0.17, xoff=-300.0, s21=-0.17, s22=0.98, yoff=300.0), границы=ГраницыСистемыКоординат(x_min=0.0, y_min=10.0, x_max=20.0, y_max=30.0))]

>>> парсер = MapinfowPrj('"Датум с кодом СК\\p26941", 3, 74, 7, -122, 39.3333333333, 40, 41.6666666667, 2000000, 500000')
>>> парсер.найти_ск("Датум с кодом СК")
СистемаКоординат(группа_ск=None, название_ск='Датум с кодом СК', код=26941, датум=Датум(proj_стр='+ellps=GRS80 +datum=NAD83'), проекция=Проекция(proj_стр='+proj=lcc +lon_0=-122.0 +lat_0=39.3333333333 +lat_1=40.0 +lat_2=41.6666666667 +x_0=2000000.0 +y_0=500000.0 +units=m'), афин=None, границы=None)

== Исправление ошибки с 3-х параметрическим датумом вместе с проекцией

>>> prjs =  '''
... "Датум3+проекция", 8, 999, 3, 23.57, -140.95, -79.8,                            7, 37.98, 0, 1, 1300000, -4511057.628
... '''
>>> парсер = MapinfowPrj(prjs)
>>> парсер.найти_ск("Датум3+проекция")
СистемаКоординат(группа_ск=None, название_ск='Датум3+проекция', код=None, датум=Датум(proj_стр='+towgs84=23.57,-140.95,-79.8 +ellps=krass'), проекция=Проекция(proj_стр='+proj=tmerc +lon_0=37.98 +lat_0=0.0 +k_0=1.0 +x_0=1300000.0 +y_0=-4511057.628 +units=m'), афин=None, границы=None)
